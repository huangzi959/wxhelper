<?phpnamespace Loytor\Wxhelper\Api;use Loytor\Wxhelper\Utils\ErrorMsg;use Loytor\Wxhelper\Utils\Http;class Wechat implements ApiInterface{    use ErrorMsg, ApiTrait;    const URL_GETWXACODEUNLIMIT = 'https://api.weixin.qq.com/wxa/getwxacodeunlimit';    const URL_WXOPEN_TEMPLATE_SEND = 'https://api.weixin.qq.com/cgi-bin/message/wxopen/template/send';    const URL_TICKET_GETTICKET = 'https://api.weixin.qq.com/cgi-bin/ticket/getticket';    /**     * @param string $scene     * @param string $page     * @param int $width     * @param bool $auto_color     * @param array $line_color     * @return bool|mixed     */    public function getWxaCodeUnlimit(string $scene, string $page, int $width = 430, bool $auto_color = false, array $line_color = ['r' => 0, 'g' => 0, 'b' => 0])    {        $result = Http::request('POST', self::URL_GETWXACODEUNLIMIT)->withAuthorizerAccessToken($this->access_token)->withBody([            'scene' => $scene,            'page' => $page,            'width' => $width,            'auto_color' => $auto_color,            'line_color' => $line_color        ])->send();        if (isset($result['errcode'])) {            $this->setErrorMsg($result);            return null;        } else {            return $result;        }    }    public function wxopenTemplateSend(string $touser, string $template_id, string $page = '', string $form_id = '', array $data = [], string $emphasis_keyword = '')    {        $result = Http::request('POST', self::URL_WXOPEN_TEMPLATE_SEND)->withAuthorizerAccessToken($this->access_token)->withBody([            'touser' => $touser,            'template_id' => $template_id,            'page' => $page ?: '',            'data' => $data ?: [],            'emphasis_keyword' => $emphasis_keyword ?: '',        ])->send();        if (isset($result['errcode']) && ($result['errcode'] != 0)) {            $this->setErrorMsg($result);            return null;        }        return $result;    }    /**     *     * 获取公众平台JsApiTicket     *     * @param string $type     * @return bool     */    public function ticketGetticket($type = 'jsapi')//wx_card|jsapi    {        $result = Http::request('GET', self::URL_TICKET_GETTICKET)            ->withAuthorizerAccessToken($this->access_token)            ->withQuery(['type' => $type])            ->send();        if (isset($result['errcode']) && ($result['errcode'] != 0)) {            $this->setErrorMsg($result);            return null;        }        return $result;    }}